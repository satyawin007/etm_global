<?php 
	/*
	$form_info = array();
	$form_info["name"] = "addstate";
	$form_info["action"] = "addstate";
	$form_info["method"] = "post";
	$form_info["class"] = "form-horizontal";
	$form_info["back_url"] = "states";
	$form_fields = array();
	$form_field = array("name"=>"fullname", "content"=>"full name", "readonly"=>"",  "required"=>"required","type"=>"text", "class"=>"form-control");
	$form_fields[] = $form_field;
	$form_field = array("name"=>"lastname", "content"=>"last name", "readonly"=>"", "required"=>"","type"=>"email", "class"=>"form-control");
	$form_fields[] = $form_field;
	$form_field = array("name"=>"age", "content"=>"age", "readonly"=>"", "required"=>"required","type"=>"password", "class"=>"form-control");
	$form_fields[] = $form_field;
	$form_field = array("name"=>"id", "content"=>"id", "readonly"=>"", "required"=>"", "type"=>"hidden", "value"=>"1", "class"=>"form-control");
	$form_fields[] = $form_field;
	$form_field = array("name"=>"date", "content"=>"date", "readonly"=>"", "required"=>"required", 	"type"=>"text", "class"=>"form-control date-picker");
	$form_fields[] = $form_field;
	$form_field = array("name"=>"State", "readonly"=>"", "content"=>"state", "class"=>"form-control", "required"=>"required", "type"=>"select",
			"options"=>array("1"=>"test1","2"=>"test2", "3"=>"test3"),
			"action"=>array("type"=>"onChange", "script"=>"paginate(1)"));
	$form_fields[] = $form_field;
	$form_field = array("name"=>"gender", "readonly"=>"","content"=>"gender", "required"=>"required","type"=>"radio", "class"=>"form-control", "options"=>array("male"=>"male", "female"=>"female"));
	$form_fields[] = $form_field;
	$form_field = array("name"=>"address", "readonly"=>"", "content"=>"address", "required"=>"required", "type"=>"textarea", "class"=>"form-control");
	$form_fields[] = $form_field;
	$form_info["form_fields"] = $form_fields;
	return View::make("masters.layouts.addform",array("form_info"=>$form_info));
	*/
?>


	<?php $__env->startSection('page_css'); ?>
		<link rel="stylesheet" href="../assets/css/bootstrap-datepicker3.css"/>
		<link rel="stylesheet" href="../assets/css/chosen.css" />
	<?php $__env->stopSection(); ?>
	<?php $__env->startSection('inline_css'); ?>
		<style>
			label {
			    font-weight: normal;
			    font-size: 13px;
			}
		</style
	<?php $__env->stopSection(); ?>
	
	<?php $__env->startSection('bredcum'); ?>	
		<small>
			INCOME& EXPENSES
			<i class="ace-icon fa fa-angle-double-right"></i>
			<?php echo strtoupper($form_info['bredcum']); ?>			
		</small>
		
	<?php $__env->stopSection(); ?>

	<?php $__env->startSection('page_content'); ?>		
		<div class="row col-xs-offset-1 col-xs-10">
		<div class="widget-box">
			<div class="widget-header">
				<h4 class="widget-title"><?php echo strtoupper($form_info['bredcum']); ?></h4>
				<div style="float:right;padding-right: 2%; margin-top: 7px"><a style="color: grey;" href="#" title="masters"><span style="color:white;"><i class="ace-icon fa fa-home bigger-200"></i></span></a> &nbsp; &nbsp;<a style="color: grey;"  title="<?php echo $form_info['back_url']; ?>" href="<?php echo $form_info['back_url']; ?>"><span style="color:white;"><i class="ace-icon fa fa-arrow-circle-left bigger-200"></i></span></a></div>
			</div>
			<div class="widget-body">
				<div class="widget-main no-padding">
				<form style="padding-top:0px;" class="<?php echo $form_info['class']; ?>" action="<?php echo $form_info['action']; ?>" method="<?php echo $form_info['method']; ?>" name="<?php echo $form_info['name']; ?>"  id="<?php echo $form_info['name']; ?>"  enctype="multipart/form-data">
					<?php $form_fields = $form_info['form_fields'];?>	
					<?php foreach ($form_fields as $form_field) {?>
						<div class="col-xs-6" style="margin-top: 15px; margin-bottom: -12px">
						<?php if($form_field['type'] === "text" || $form_field['type'] === "email" ||$form_field['type'] === "number" || $form_field['type'] === "password"){ ?>
						<div class="form-group">
							<label class="col-xs-4 control-label no-padding-right" for="form-field-1"> <?php echo strtoupper($form_field['content']); if($form_field['required']=="required") echo '<span style="color:red;">*</span>'; ?> </label>
							<div class="col-xs-7">
								<input <?php echo $form_field['readonly']; ?>  type="<?php echo $form_field['type']; ?>" value="<?php echo $form_field['value']; ?>"  id="<?php echo $form_field['name']; ?>" <?php echo $form_field['required']; ?> name="<?php echo $form_field['name']; ?>" class="<?php echo $form_field['class']; ?>" <?php if(isset($form_field['action'])) { $action = $form_field['action'];  echo $action['type']."=".$action['script']; }?>>
							</div>			
						</div>
						<?php } ?>
						<?php if($form_field['type'] === "hidden"){ ?>
						<div class="form-group">
							<div class="col-xs-7">
								<input type="<?php echo $form_field['type']; ?>" id="<?php echo $form_field['name']; ?>" name="<?php echo $form_field['name']; ?>" value="<?php echo $form_field['value']; ?>" />
							</div>			
						</div>
						<?php } ?>
						<?php if($form_field['type'] === "textarea"){ ?>				
						<div class="form-group">
							<label class="col-xs-4 control-label no-padding-right" for="form-field-1"> <?php echo strtoupper($form_field['content']); if($form_field['required']=="required") echo '<span style="color:red;">*</span>'; ?> </label>
							<div class="col-xs-7">
								<textarea <?php echo $form_field['readonly']; ?> id="<?php echo $form_field['name']; ?>" name="<?php echo $form_field['name']; ?>" class="<?php echo $form_field['class']; ?>"><?php echo $form_field['value']; ?></textarea>
							</div>			
						</div>
						<?php } ?>
						<?php if($form_field['type'] === "file"){ ?>				
							<div class="form-group">
								<label class="col-xs-4 control-label no-padding-right" for="form-field-1"> <?php echo strtoupper($form_field['content']); if($form_field['required']=="required") echo '<span style="color:red;">*</span>'; ?> </label>
								<div class="col-xs-7">
									<input type="file" id="<?php echo $form_field['name']; ?>" name="<?php echo $form_field['name']; ?>"  class="form-control file"/>
									<script><?php if(isset($form_field['value']) && $form_field['value'] != "") echo "fileExist = true; fileName=".$form_field['value']."'; "; ?></script>
								</div>			
							</div>
						<?php } ?>
						
						<?php if($form_field['type'] === "checkboxslide"){ ?>
							<div class="form-group">
								<label class="col-xs-4 control-label no-padding-right" for="form-field-1"> <?php echo strtoupper($form_field['content']); if($form_field['required']=="required") echo '<span style="color:red;">*</span>'; ?> </label>
								<div class="col-xs-7" style="margin-top: 6px;">
									<input id="<?php echo $form_field['name']; ?>" name="<?php echo $form_field['name']; ?>" class="ace ace-switch ace-switch-5" type="checkbox" />
									<span class="lbl"></span>
								</div>
							</div>
						<?php } ?>
						<?php if($form_field['type'] === "radio"){ ?>				
						<div class="form-group">
							<label class="col-xs-4 control-label no-padding-right" for="form-field-1"> <?php echo strtoupper($form_field['content']); if($form_field['required']=="required") echo '<span style="color:red;">*</span>'; ?> </label>
							<div class="col-xs-7">
								<div class="radio">
								<?php 
									foreach($form_field["options"] as $key => $value){
										$selcted = "";
										if($form_field['value']==$key){
											$selcted = " checked='true' ";
										}
										echo "<label><input type='radio' $selcted name=\"".$form_field['name']."\"class='ace' value='$key'> <span class='lbl'>".$value."</span></label>&nbsp;&nbsp;";
									}
								?>
								</div>
							</div>			
						</div>
						<?php } ?>
						<?php if($form_field['type'] === "select"){ ?>
						<div class="form-group">
							<label class="col-xs-4 control-label no-padding-right" for="form-field-1"> <?php echo strtoupper($form_field['content']); if($form_field['required']=="required") echo '<span style="color:red;">*</span>'; ?> </label>
							<div class="col-xs-7">
								<select class="<?php echo $form_field['class']; ?>"  <?php echo $form_field['required']; ?>  name="<?php echo $form_field['name']; ?>" id="<?php echo $form_field['id']; ?>" <?php if(isset($form_field['action'])) { $action = $form_field['action'];  echo $action['type']."=".$action['script']; }?> <?php if(isset($form_field['multiple'])) { echo " multiple "; }?>>
									<option value="">-- <?php echo $form_field['name']; ?> --</option>
									<?php 
										foreach($form_field["options"] as $key => $value){
											if(isset($form_field['multiple']) && isset($form_field['value'])&& in_array($key, $form_field['value'])){
												echo "<option selected value='$key'>$value</option>";
											}
											else if(isset($form_field['value']) && $form_field['value']==$key){
												echo "<option selected value='$key'>$value</option>";
											}
											else {
												echo "<option value='$key'>$value</option>";
											}											
										}
									?>
								</select>
							</div>			
						</div>				
						<?php } ?>
						</div>
					
					<?php } ?>
					<div id="addfields"></div>
					</div>
					<div class="clearfix" >
						<div class="col-md-12" style="background-color: #E6DFDF;border-top: 2px solid #D2CDCD; margin-top: 10px;">
						<div class="col-md-offset-4 col-md-8" style="margin-top: 2%; margin-bottom: 1%">
							<button id="reset" class="btn primary" type="submit" id="submit">
								<i class="ace-icon fa fa-check bigger-110"></i>
								SUBMIT
							</button>
							<!--  <input type="submit" class="btn btn-info" type="button" value="SUBMIT"> -->
							&nbsp; &nbsp; &nbsp;
							<button id="reset" class="btn" type="reset">
								<i class="ace-icon fa fa-undo bigger-110"></i>
								RESET
							</button>
						</div>
						</div>
					</div>
				</form>
				
				</div>
			</div>
		</div>	
	<?php $__env->stopSection(); ?>
	
	<?php $__env->startSection('page_js'); ?>
		<script src="../assets/js/date-time/bootstrap-datepicker.js"></script>
		<script src="../assets/js/bootbox.js"></script>
		<script src="../assets/js/jquery.maskedinput.js"></script>
		<script src="../assets/js/chosen.jquery.js"></script>
	<?php $__env->stopSection(); ?>
	
	<?php $__env->startSection('inline_js'); ?>
		<script>
			function changeState(val){
				$.ajax({
			      url: "getcitiesbystateid?id="+val,
			      success: function(data) {
			    	  $("#cityname").html(data);
			      },
			      type: 'GET'
			   });
			}

			function calcTotal(){
				ltrs = $("#litres").val();
				price = $("#priceperlitre").val();
				$("#totalamount").val(ltrs*price);
			}

			function changeCity(val){
				$.ajax({
			      url: "getfinancecompanybycityid?id="+val,
			      success: function(data) {
			    	  $("#financecompany").html(data);
			      },
			      type: 'GET'
			   });
			}
			
			$("#reset").on("click",function(){
				$("#<?php echo $form_info['name']; ?>").reset();
			});

			$("#submit").on("click",function(){
				$("#<?php echo $form_info['name']; ?>").submit();
			});


			$('.number').keydown(function(e) {
				this.value = this.value.replace(/[^0-9.]/g, ''); 
				this.value = this.value.replace(/(\..*)\./g, '$1');
			});
		
			//datepicker plugin
			//link
			$('.date-picker').datepicker({
				autoclose: true,
				todayHighlight: true
			})
			//show datepicker when clicking on the icon
			.next().on(ace.click_event, function(){
				$(this).prev().focus();
			});

			$('.input-mask-phone').mask('(999) 999-9999');

			if(!ace.vars['touch']) {
				$('.chosen-select').chosen({allow_single_deselect:true}); 
				//resize the chosen on window resize
		
				$(window)
				.off('resize.chosen')
				.on('resize.chosen', function() {
					$('.chosen-select').each(function() {
						 var $this = $(this);
						 $this.next().css({'width': $this.parent().width()});
					})
				}).trigger('resize.chosen');
				//resize chosen on sidebar collapse/expand
				$(document).on('settings.ace.chosen', function(e, event_name, event_val) {
					if(event_name != 'sidebar_collapsed') return;
					$('.chosen-select').each(function() {
						 var $this = $(this);
						 $this.next().css({'width': $this.parent().width()});
					})
				});
		
		
				$('#chosen-multiple-style .btn').on('click', function(e){
					var target = $(this).find('input[type=radio]');
					var which = parseInt(target.val());
					if(which == 2) $('#form-field-select-4').addClass('tag-input-style');
					 else $('#form-field-select-4').removeClass('tag-input-style');
				});
			}

			$('.file').ace_file_input({
				no_file:'No File ...',
				btn_choose:'Choose',
				btn_change:'Change',
				droppable:false,
				onchange:null,
				thumbnail:false //| true | large
				//whitelist:'gif|png|jpg|jpeg'
				//blacklist:'exe|php'
				//onchange:''
				//
			});
			//pre-show a file name, for example a previously selected file
			//$('#id-input-file-1').ace_file_input('show_file_list', ['myfile.txt'])
		
		
			
			<?php 
				if(Session::has('message')){
					echo "bootbox.confirm('".Session::pull('message')."', function(result) {});";
				}
			?>
			
			function paginate(page){
				//alert("page : "+page);
				return;
			}
			function showPaymentFields(val){
				$("#addfields").html('<div style="margin-left:600px; margin-top:100px;"><i class="ace-icon fa fa-spinner fa-spin orange bigger-125" style="font-size: 250% !important;"></i></div>');
				$.ajax({
				      url: "getpaymentfields?paymenttype="+val,
				      success: function(data) {
				    	  $("#addfields").html(data);
				    	  $('.date-picker').datepicker({
							autoclose: true,
							todayHighlight: true
						  });
				    	  $("#addfields").show();
				      },
				      type: 'GET'
				   });
				
			}
		
		</script>
	<?php $__env->stopSection(); ?>

<?php echo $__env->make('masters.master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>